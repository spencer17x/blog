name: Blog CI # 配置名称

on: # 触发条件，master分支push代码后触发workflow
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest # 构建运行环境
    steps:
    - name: Checkout  # 获取源码，使用actions/checkout@v2
      uses: actions/checkout@v2

    - name: Install Node.js # 安装指定Node版本，使用actions/setup-node@v1
      uses: actions/setup-node@v1
      with:
        node-version: '12.x'

#    - name: Configuration environment
#        run: |
#          git config --global user.name $GIT_USER
#          git config --global user.email $GIT_EMAIL

    - name: Install & Build & deploy # 安装依赖打包静态资源
      run: |
        yarn install
        yarn build
        yarn deploy